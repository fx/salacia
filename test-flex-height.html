<!DOCTYPE html>
<html>
<head>
  <style>
    body { font-family: monospace; }
    
    /* Container with explicit height */
    .container {
      height: 200px;
      border: 2px solid red;
      display: flex;
      align-items: flex-end;
      padding: 20px;
      background: #f0f0f0;
    }
    
    /* Inner flex container */
    .bars-wrapper {
      display: flex;
      width: 100%;
      height: 100%; /* Takes full height of parent */
      align-items: flex-end;
      gap: 10px;
      background: rgba(0,0,255,0.1);
    }
    
    /* Bar column */
    .bar-col {
      display: flex;
      align-items: flex-end;
      width: 30px;
      background: rgba(255,0,0,0.1);
    }
    
    /* Bars with percentage heights */
    .bar {
      width: 100%;
      background: green;
    }
    
    /* Heights relative to parent container */
    .bar[data-h="10"] { height: 100%; }
    .bar[data-h="5"] { height: 50%; }
    .bar[data-h="3"] { height: 30%; }
  </style>
</head>
<body>
  <h2>Test: Percentage heights in flex container</h2>
  
  <div class="container">
    <div class="bars-wrapper">
      <div class="bar-col">
        <div class="bar" data-h="10"></div>
      </div>
      <div class="bar-col">
        <div class="bar" data-h="5"></div>
      </div>
      <div class="bar-col">
        <div class="bar" data-h="3"></div>
      </div>
    </div>
  </div>
  
  <p>Expected: Green bars at 100%, 50%, and 30% height</p>
  
  <h2>Test 2: Without intermediate wrapper height</h2>
  <div class="container">
    <div class="bars-wrapper" style="height: auto;">
      <div class="bar-col">
        <div class="bar" data-h="10"></div>
      </div>
      <div class="bar-col">
        <div class="bar" data-h="5"></div>
      </div>
      <div class="bar-col">
        <div class="bar" data-h="3"></div>
      </div>
    </div>
  </div>
  
  <p>If bars disappear here, it means the wrapper needs explicit height!</p>
</body>
</html>